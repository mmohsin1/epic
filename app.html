<!DOCTYPE html>
<html>

<head>

	<script src='https://mmohsin1.github.io/epic/dist/fhir-client-v2.js'></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const token_endpoint="https://fhir.epic.com/interconnect-fhir-oauth/oauth2/token";
        const code = urlParams.get('code');
        const state = urlParams.get('state');
       console.log('code:',code);
       console.log('state:',state);
       const clientId="b2774854-9deb-4b01-8e33-2f82a52a9cf0";
       var myHeaders = new Headers();
myHeaders.append("Content-Type", "application/x-www-form-urlencoded");

var urlencoded = new URLSearchParams();
urlencoded.append("grant_type", "authorization_code");
urlencoded.append("code", code);
urlencoded.append("redirect_uri", "https://mmohsin1.github.io/epic/app");
urlencoded.append("client_id", clientId);


var requestOptions = {
  method: 'POST',
  headers: myHeaders,
  body: urlencoded,
};

       fetch(token_endpoint,requestOptions)
  .then(response => response.text())
  .then(result => console.log('result',result))
  .catch(error => console.log('error', error));


      </script>
  
</head>

<body>
<h5>Patient Detail</h5>
	   
	

</body>

</html>
